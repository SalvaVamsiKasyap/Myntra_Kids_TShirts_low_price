version: 0.2

phases:
  install:
    commands:
    
      - pip install pytest
      - pip install -r requirements.txt
      - sudo apt update
      - sudo apt install -y libxss1 libappindicator1 libindicator7 xvfb
      - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      - sudo apt --fix-broken install
      - sudo apt-get install -f   # This command will attempt to fix any dependency issues
      - sudo apt-get clean
      - echo "Do you want to continue? [Y/n]"
      - echo "n" > response.txt 
      - sudo apt-get install fonts-liberation libasound2 libatk-bridge2.0-0 libatspi2.0-0 libgbm1 libgtk-3-0 libu2f-udev libvulkan1 libxkbcommon0 xdg-utils < response.txt
      - sudo dpkg -i google-chrome-stable_current_amd64.deb





  build:
    commands:
      - cd ptests
      - pytest  -m stories